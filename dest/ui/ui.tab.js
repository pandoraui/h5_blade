define(["UIView","text!T_UITab","text!C_UITab"],function(a,b,c){return _.inherit(a,{propertys:function($super){$super(),this.template=b,this.addUIStyle(c),this.data=[],this.index=0,this.events={"click .js_item_wrapper>li":"clickAction"},this.onChange=function(){0},this._itemWidth=0,this.checkedClass="active"},getViewModel:function(){return this._getDefaultViewModel(["data","index"])},resetPropery:function(){if((this.index<0||this.index>this.data.length)&&(this.index=0),!this.selectedKey)return void(this.selectedKey=this.data[this.index].id);for(var a=0,b=this.data.length;b>a;a++)if(this.selectedKey===this.data[a].id){this.index=a;break}},initElement:function(){this.scrollbar=this.$(".js_scrollbar"),this.tabs=this.$("li")},clickAction:function(a){{var b=$(a.currentTarget),c=b.attr("data-index");this.data[c]}this.setIndex(c)},setVal:function(a){this.el=this.$('li[data-key="'+a+'"]');var b=this.el.attr("data-index"),c=this.data[b];if(!c)return void 0;var d=this.selectedKey==a;this.selectedKey=a,this.tabs.removeClass(this.checkedClass),this.el&&this.el.addClass(this.checkedClass),this.scrollbar.css("left",this._itemWidth*b),0==d&&"function"==typeof this.onChange&&this.onChange.call(this,c)},getVal:function(){return this.selectedKey},setIndex:function(a){0>a||a>this.data.length-1||this.setVal(this.data[a].id)},getIndex:function(){for(var a=0,b=this.data.length;b>a;a++)if(this.getVal()==this.data[a].id)return a;return-1},addEvent:function($super){$super(),this.on("onShow",function(){this.scrollbar&&this.tabs&&(this._itemWidth=$(this.tabs[0]).width(),this.scrollbar.width(this._itemWidth))})}})});