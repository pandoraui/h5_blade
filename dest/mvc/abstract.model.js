define(["ajax"],function(a){var b=_.inherit({propertys:function(){this.url=null,this.param=null,this.dataformat=null,this.validates=[],this.protocol="http",this.contentType="json",this.method="POST",this.baseurl={domain:"",path:""}},setOption:function(a){_.extend(this,a)},assert:function(){if(null===this.url)throw"not override url property";if(null===this.param)throw"not override param property"},initialize:function(){this.propertys(),this.setOption(options),this.assert()},pushValidates:function(a){"function"==typeof a&&this.validates.push($.proxy(a,this))},setParam:function(a,b){"object"!=typeof a||b?this.param[a]=b:this.param=a},getParam:function(){return this.param},buildurl:function(){throw"[ERROR]abstract method:buildurl, must be override"},execute:function(b,c,d,e,f){var g=this.buildurl(),h=$.proxy(function(a){for(var e=0,f=this.validates.length;f>e;e++)if(!this.validates[e](a))return"function"==typeof c?c.call(d||this,a):!1;var g="function"==typeof this.dataformat?this.dataformat(a):a;"function"==typeof b&&b.call(d||this,g,a)},this),i=$.proxy(function(a){"function"==typeof c&&c.call(d||this,a)},this),f=f||_.clone(this.getParam()||{});f.contentType=this.contentType,"json"===this.contentType?a.cros(g,this.method,f,h,i):"jsonp"===this.contentType?a.jsonp(g,f,h,i):a.post(g,f,h,i)}});return b});