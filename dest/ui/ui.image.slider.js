define(["UISlider"],function(a){return _.inherit(a,{propertys:function($super){$super(),this.momentum=!1,this.autoPlay=!1,this.timerSrc=null,this.delaySec=3e3,this.playTime=500,this.sliderNav=null,this.displayNum=1,this.needLoop=!0},play:function(){this.autoPlay&&(this.stop(),this.timerSrc=setInterval($.proxy(function(){var a=this.index;a++,a==this.itemNum&&(a=0),this.setIndex(a,null,null,this.playTime)},this),this.delaySec))},stop:function(){this.timerSrc&&(clearInterval(this.timerSrc),this.timerSrc=null)},createNav:function(){if(!this.sliderNav){for(var a='<div class="cm-slide-bullet js_nav" style="position: absolute;">',b=0;b<this.itemNum;b++)a+='<span class="cm-bullet-item js_nav_item" data-index="'+b+'"></span>';a+="</div>",this.sliderNav=$(a),this.swrapper.append(this.sliderNav),this._setNavPos(),this._setNavIndex(this.index)}},resizeRefresh:function($super){$super(),this._setNavPos()},_setNavPos:function(){var a=(parseInt(this.wrapper.width())-16*this.itemNum)/2;this.sliderNav.css({right:"auto",top:"auto",left:a,bottom:"10px","z-index":"500"})},_addTouchEvent:function(){var a=this;this._removeTouchEvent();var b=function(){a.stop()},c=function(){a.play()};this.$el.on("touchstart.imageslidertouchmove"+this.id,b),this.$el.on("touchmove.imageslidertouchmove"+this.id,b),this.$el.on("touchend.imageslidertouchmove"+this.id,c),this.$el.on("mousedown.imageslidertouchmove"+this.id,b),this.$el.on("mousemove.imageslidertouchmove"+this.id,b),this.$el.on("mouseup.imageslidertouchmove"+this.id,c)},_removeTouchEvent:function(){this.$el.off(".imageslidertouchmove"+this.id)},_setNavIndex:function(a){this.sliderNav.find(".js_nav_item").removeClass("active"),this.sliderNav.find('.js_nav_item[data-index="'+a+'"]').addClass("active")},changedAction:function(){this._setNavIndex(this.index)},addEvent:function($super){$super(),this.on("onRefresh",function(){this.sliderNav=null}),this.on("onCreate",function(){this.$el.addClass("cm-slide--full-img")}),this.on("onShow",function(){this.createNav(),this.play(),this._addTouchEvent()}),this.on("onHide",function(){this.stop(),this._removeTouchEvent()})}})});