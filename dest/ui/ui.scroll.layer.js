define(["UILayer","text!T_UIScrollLayer","UIScroll"],function(a,b,c){return _.inherit(a,{propertys:function($super){$super(),this.template=b,this.openShadowDom=!1,this.title="",this.btns=[{name:"cancel",className:"js_cancel"},{name:"ok",className:"js_ok"}],this.addEvents({"click .js_ok":"okAction","click .js_cancel":"cancelAction","click .js_close":"closeAction"}),this.html=null,this.maxHeight=300,this.sheight=0,this.scrollOpts={}},getViewModel:function(){return this._getDefaultViewModel(["title","btns"])},okAction:function(){0},cancelAction:function(){0},closeAction:function(){this.hide()},initElement:function(){this.swrapper=this.$(".js_body"),this.footer=this.$(".js_footer")},initSize:function(){this.html&&(this.html=$(this.html),this.html.length>1&&(this.html=$("<div></div>").append(this.html)),this.html.css({position:"absolute"}),this.swrapper.append(this.html),this._initWrapperSize())},_initWrapperSize:function(){var a=0;this.sheight=this.html.height(),a=Math.min(this.sheight,this.maxHeight),this.swrapper.height(a),this.footer.height(this.footer.height()),this.width&&this.$root.width(this.width)},refreshHeight:function(){this._initWrapperSize(),this.scroll&&this.scroll.refresh&&this.scroll.refresh(),this._initScroll()},_initScroll:function(){this.scroll&&this.scroll.destory&&this.scroll.destory(),this.sheight>=this.maxHeight&&(this.scrollOpts.wrapper=this.swrapper,this.scrollOpts.scroller=this.html,this.scroll=new c(this.scrollOpts))},addEvent:function($super){$super(),this.on("onShow",function(){this.initSize(),this._initScroll()},1),this.on("onHide",function(){this.scroll&&(this.scroll.destroy(),this.scroll=null)})}})});