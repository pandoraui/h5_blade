define(["UIView","text!T_UICalendar","text!C_UICalendar"],function(a,b,c){return _.inherit(a,{propertys:function($super){$super(),this.template=b,this.addUIStyle(c),this.dateObj=new Date,this.solarHoliday={"0101":"元旦","0214":"情人节","0308":"妇女节","0312":"植树节","0314":"白情","0401":"愚人节","0501":"劳动节","0504":"青年","0531":"无烟","0601":"儿童","0910":"教师",1001:"国庆",1225:"圣诞节"},this.lunarHoliday={20150218:"除夕",20150219:"春节",20150305:"元宵",20150405:"清明",20150620:"端午",20150820:"七夕",20150828:"中元",20150927:"中秋",20151021:"重阳",20160207:"除夕",20160208:"春节",20160222:"元宵",20160404:"清明",20160609:"端午",20160809:"七夕",20160817:"中元",20160915:"中秋",20161009:"重阳",20170127:"除夕",20170128:"春节",20170211:"元宵",20170404:"清明",20170530:"端午",20170828:"七夕",20170905:"中元",20171004:"中秋",20171028:"重阳",20180215:"除夕",20180216:"春节",20180302:"元宵",20180405:"清明",20180618:"端午",20180817:"七夕",20180825:"中元",20180924:"中秋",20181017:"重阳"},this.jetLag=0,this.specialDates=!1,this.scope=this,this.startTime=null,this.endTime=null,this.weekDayArr=["日","一","二","三","四","五","六"],this.displayMonthNum=5,this.curTime=this.dateObj.getTime(),this.selectDate=null,this.MonthClapFn=function(a,b){return b+=1,a+"年"+b+"月"},this.dayItemFn=function(a,b,c,d,e){var f={day:c},g=[],h=_.dateUtil.formatNum(b+1)+_.dateUtil.formatNum(c),i=a.toString()+_.dateUtil.formatNum(b+1)+_.dateUtil.formatNum(c),j=parseInt(-1*e/36e5*100)/100;return j>=0&&24>j?f.day1="今天":j>=-24&&0>j?f.day1="明天":j>=-48&&-24>j&&(f.day1="后天"),this.solarHoliday[h]&&(f.solarHoliday=this.solarHoliday[h]),this.lunarHoliday[i]&&(f.lunarHoliday=this.lunarHoliday[i]),this.specialDates,g[0]='<div class="cm-field-title">'+(f.day1||f.day)+"</div>",(f.solarHoliday||f.lunarHoliday)&&(g[0]='<div class="cm-field-title">'+(f.lunarHoliday||f.solarHoliday)+"</div>"),this.dayItemAction?this.dayItemAction.call(this,f,a,b,c,d,e):g.join("")},this.dayItemAction=null,this.events={"click .js_calendar_item ":"itemAction"},this.onItemClick=function(){0}},getViewModel:function(){return this._getDefaultViewModel(["scope","startTime","endTime","weekDayArr","displayMonthNum","curTime","selectDate","MonthClapFn","dayItemFn","year","month","endDate"])},resetPropery:function($super){$super(),this.deffTimezone=1e3*this.jetLag;var a=new Date(this.dateObj.getTime()+this.deffTimezone);this.curTime=a.getTime(),this.year=a.getFullYear(),this.month=a.getMonth(),this.endDate=new Date(this.year,this.month+this.displayMonthNum,0)},setJetLag:function(a){this.jetLag=parseInt(a),this.refresh()},addDisplayMonth:function(a){this.displayMonthNum=this.displayMonthNum+a,this.refresh()},handleCnDay:function(a,b){var c=a,d=[];_.isDate(a)?c=a.getFullYear()+"-"+a.getMonth()+"-"+a.getDate():_.isString(a)&&(d=a.split("-"),c=d[0]+"-"+(parseInt(d[1])-1)+"-"+d[2]),this.handleDay(c,b)},handleDay:function(a,b){var c,d=a;_.isDate(a)&&(d=a.getFullYear()+"-"+a.getMonth()+"-"+a.getDate()),c=this.$('li[data-date="'+d+'"]'),c[0]&&_.isFunction(b)&&b.call(this,c)},itemAction:function(a){var b=$(a.currentTarget);if(!b.hasClass("cm-item--disabled")){var c=b.attr("data-date");if(c=c.split("-"),3!=c.length)return!1;c=new Date(c[0],c[1],c[2]),this.onItemClick&&this.onItemClick.call(this,c,b,a)}},initElement:function(){this.weekDay=this.$(".js_weekend")}})});